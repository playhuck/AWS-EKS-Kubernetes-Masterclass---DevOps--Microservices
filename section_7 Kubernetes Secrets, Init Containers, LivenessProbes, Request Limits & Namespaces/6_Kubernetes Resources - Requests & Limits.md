- **Kubernetes Resources - Requests & Limits**
    
    
    ### **요청(Requests)과 제한(Limits) 개요**
    
    - **요청 (Requests)**
        - **목적**: 컨테이너가 정상적으로 실행되기 위해 필요한 자원의 최소량을 정의합니다.
        - **사용**: Kubernetes 스케줄러는 요청된 자원을 기반으로 노드를 선택하여 포드를 배치합니다. 즉, 컨테이너가 필요한 최소 자원을 보장합니다.
    - **제한 (Limits)**
        - **목적**: 컨테이너가 사용할 수 있는 자원의 최대량을 설정합니다.
        - **사용**: Kubelet은 설정된 자원 제한을 강제하여 컨테이너가 이 제한을 초과하지 않도록 합니다. 이를 통해 자원 과다 사용을 방지합니다.
        - Kubernetes에서 실행되는 중요한 컨테이너는 항상 필요한 CPU와 메모리를 갖도록 설정해야합니다.
    
    요청과 제한을 사용하여 필요한 메모리와 CPU를 예약할 수 있습니다. 높은 트래픽 조건에서는 자원이 500MB의 메모리와 100,000m의 CPU로 증가할 수 있으므로 이러한 제한을 자동으로 설정할 수 있습니다.
    
    ### **자원 단위**
    
    - **CPU**:
        - 1,000m는 1 VCPU에 해당합니다.
        - 예: 500m는 0.5 VCPU.
    - **메모리**:
        - 1,024Mi는 1GB에 해당합니다.
        - 예: 128Mi는 약 135MB입니다.
    
    ### **실습 예제**
    
    - **설정**:
        - 요청: 메모리 128Mi, CPU 500m.
        - 제한: 메모리 500Mi, CPU 1,000m (1 VCPU).
    - **목표**: 사용자 관리 마이크로서비스가 500Mi 메모리와 1 VCPU를 초과하지 않도록 설정.
    
    ### **자원 설정 적용**
    
    1. **매니페스트 파일 수정**: 요청과 제한을 컨테이너 정의의 `resources` 섹션에 추가합니다.
    2. **명령어 실행**: `kubectl apply -f kube-manifest` 명령어를 사용하여 객체를 생성합니다.
    3. **상태 확인**: `kubectl get nodes` 및 `kubectl describe node` 명령어로 노드의 자원 분포를 확인합니다.
        
        ```yaml
         			resources:
                    requests:
                      cpu: "500m" 
                      memory: "128Mi"
                    limits:
                      cpu: "1000m"
                      memory: "500Mi"
        
        usermgmt-microservice-86d6cdc86f-qhfdp
        		CPU Requests  CPU Limits  Memory Requests  Memory Limits
        		500m (25%)    1 (51%)     128Mi (3%)       500Mi (15%)
        ```
        
    
    T3 미디엄 인스턴스는 2 VCPU와 4GB 메모리를 가지고 있으며, 이 중 일부가 사용자 관리 마이크로서비스를 위해 예약되어 있습니다. 자원 요청과 제한을 올바르게 설정했는지 확인하는 것이 중요합니다.
    
    클러스터의 자원 소비와 시스템 관련 자원도 고려해야 합니다. 클러스터가 높은 부하 조건을 견딜 수 있는지 계획하고 결정해야 합니다.
    
    ### **스케일링 및 자원 관리**
    
    - **자동 스케일링**: 클러스터가 자동으로 자원을 조정할 수 있지만, 작은 클러스터에서는 자원 소비를 신중히 고려해야 합니다.
    - **자원 계획**: 클러스터의 자원 소비와 시스템 자원도 고려하여, 클러스터가 높은 부하 조건을 견딜 수 있도록 계획합니다.